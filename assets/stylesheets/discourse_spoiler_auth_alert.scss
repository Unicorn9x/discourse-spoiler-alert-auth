.spoiled-auth {
  cursor: auto;
  transform: translateZ(0); // Safari jitter fix

  .lightbox .meta {
    display: none;
  }

  svg {
    vertical-align: middle;
  }
}

.spoiler-auth-blurred {
  @include unselectable;
  cursor: pointer;
  filter: blur(0.5em);
  position: relative;

  &::after {
    content: "ðŸ”’ Login to reveal";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.9em;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.2s ease;
    filter: none;
    z-index: 1;
  }

  &:hover {
    filter: blur(0.5em);

    &::after {
      opacity: 1;
    }
  }

  a,
  area,
  audio,
  button,
  details,
  embed,
  iframe,
  img.animated,
  input,
  map,
  object,
  option,
  portal,
  select,
  textarea,
  track,
  video,
  .lightbox {
    pointer-events: none;
  }

  img {
    filter: blur(1em);
  }

  .discourse-no-touch & {
    &:hover,
    &:focus {
      filter: blur(0.18em);

      img {
        filter: blur(0.5em);
      }
    }
  }
}

.ProseMirror {
  .spoiled-auth:not(.spoiler-auth-blurred) {
    box-shadow: 0 0 4px 4px rgb(var(--primary-rgb), 0.2);
    inline-size: max-content;
    padding-left: 2px;
    padding-right: 2px;
  }
} 